<script>
        function filterArticles(manualQuery) {
            // Se vier um texto por fora (manualQuery), usa ele. Se não, pega o que está no input.
            let input = manualQuery !== undefined ? manualQuery.toLowerCase() : document.getElementById('diarioSearch').value.toLowerCase();
            
            // Se foi uma busca externa, coloca o texto no campo para o usuário ver o que está filtrado
            if (manualQuery !== undefined) {
                document.getElementById('diarioSearch').value = manualQuery;
            }

            let items = document.getElementsByClassName('article-item');

            for (let i = 0; i < items.length; i++) {
                let text = items[i].innerText.toLowerCase();
                if (text.includes(input)) {
                    items[i].style.display = "grid";
                } else {
                    items[i].style.display = "none";
                }
            }
        }

        // NOVIDADE: Este bloco abaixo roda assim que o Diário termina de carregar
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const buscaVindaDeFora = urlParams.get('busca'); // Pega o que o index.html mandou
            
            if (buscaVindaDeFora) {
                filterArticles(buscaVindaDeFora); // Executa o filtro automaticamente
            }
        };
    </script>
